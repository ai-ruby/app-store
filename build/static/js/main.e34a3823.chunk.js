(window["webpackJsonpapp-store"]=window["webpackJsonpapp-store"]||[]).push([[0],{119:function(e,t,r){e.exports=r(227)},218:function(e,t,r){},219:function(e,t,r){},220:function(e,t,r){},221:function(e,t,r){},222:function(e,t,r){},223:function(e,t,r){},225:function(e,t,r){},227:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(9),i=r.n(c),o=r(36),s=r(109),l=r(21),u=r(117),p=r(38),m=r(15),d=r(16),f=r(19),h=r(17),b=r(20),O=r(29),v=r(46);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(r,!0).forEach((function(t){Object(v.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j="SEARCH_LIST",E="SEARCH_VALUE",w="SEARCH_APP_LIST",L={searchList:[],searchValue:"",searchAppList:[],searchRecommendList:[]};var P=r(22),N=r.n(P),S=r(35),k=r(37),R=r.n(k),C=r(116),D=r.n(C),x=Object(S.a)(N.a.mark((function e(){var t,r,n,a=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:"",r=a.length>1&&void 0!==a[1]?a[1]:{},"GET"!==(a.length>2&&void 0!==a[2]?a[2]:"GET").toUpperCase()){e.next=16;break}return e.prev=5,e.next=8,R.a.get(t,{params:r});case 8:n=e.sent,e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(5),new Error(e.t0);case 14:e.next=25;break;case 16:return e.prev=16,e.next=19,R.a.post(t,D.a.stringify(r));case 19:n=e.sent,e.next=25;break;case 22:throw e.prev=22,e.t1=e.catch(16),new Error(e.t1);case 25:return e.abrupt("return",new Promise((function(e,t){200===n.status?e(n.data):t(n.data)})));case 26:case"end":return e.stop()}}),e,null,[[5,11],[16,22]])})));function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(r,!0).forEach((function(t){Object(v.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _="RECOMMEND_LIST",I="SEARCH_RECOMMEND_LIST",M={recommendList:[],searchRecommendList:[]};function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(r,!0).forEach((function(t){Object(v.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var J="APP_LIST",U="SEARCH_APP_LIST",G={appList:[],searchList:[]};r(218);var B,q,z,F,W,K,Q=Object(l.b)((function(e){return e.search}),{searchValueDispatch:function(e){return function(t){t(function(e){return{type:E,payload:e}}(e))}}})(B=Object(l.b)((function(e){return e.recommendList}),{searchRecommendList:function(e,t){return function(r){r(function(e){return{type:I,payload:e}}(e.filter((function(e){var r=e["im:name"].label.toUpperCase(),n=t.toUpperCase();return r.split(n).length>1?e:""}))))}}})(B=Object(l.b)((function(e){return e.appList}),{searchAppList:function(e){return function(t){t(function(e){return{type:J,payload:e}}(JSON.parse(localStorage.getItem("topfreeapplications")).filter((function(t){var r=t["im:name"].label.toUpperCase(),n=e.toUpperCase();return r.split(n).length>1?t:""}))))}}})(B=function(e){function t(){var e,r;Object(m.a)(this,t);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(r=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).onChange=function(e){var t=r.props,n=t.searchValueDispatch,a=t.searchRecommendList,c=t.recommendList,i=t.searchAppList;n(e),a(c,e),i(e)},r}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.searchValue;return a.a.createElement("div",null,a.a.createElement(O.c,{className:"search-bar",style:{position:t?"fixed":"absolute"},placeholder:"\u641c\u7d22",value:t,onChange:function(t){return e.onChange(t)}}))}}]),t}(a.a.Component))||B)||B)||B,X=(r(219),function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.data;return a.a.createElement("div",{className:"no-data"},e||"\u6682\u65e0\u66f4\u591a\u4fe1\u606f\u54e6...")}}]),t}(a.a.Component)),Y=(r(220),function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.data;return a.a.createElement("div",{className:"loading"},e||"loading...")}}]),t}(a.a.Component)),Z=(r(221),Object(l.b)((function(e){return e.recommendList}),{getRecommendList:function(e){return function(){var e=Object(S.a)(N.a.mark((function e(t){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("https://itunes.apple.com/hk/rss/topgrossingapplications/limit=10/json",{},"GET");case 2:r=e.sent,t({type:"RECOMMEND_LIST",payload:r.feed.entry});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((F=z=function(e){function t(){var e,r;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(r=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(c)))).renderRow=function(e,t){return a.a.createElement("div",{className:"media-list",key:"recommend-".concat(t)},a.a.createElement("div",{className:"media-list-body media-list-row"},a.a.createElement("div",{className:"media-list-body-hd media-list-row-hd"},a.a.createElement("img",{src:e["im:image"][0].label,alt:""})),a.a.createElement("div",{className:"media-list-body-bd media-list-row-bd"},a.a.createElement("div",{className:"media-list-body-title"},e["im:name"].label),a.a.createElement("div",{className:"media-list-row-subtitle"},e.category.attributes.label," "))))},r}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.getRecommendList)()}},{key:"render",value:function(){var e=this,t=this.props,r=t.recommendList,n=t.searchRecommendList,c=t.searchValue;return a.a.createElement("div",{className:"media-container"},a.a.createElement("div",{className:"title"},"\u63a8\u4ecb"),a.a.createElement("div",{className:"recommend-list"},c&&(n&&0!==n.length?n.map((function(t,r){return e.renderRow(t,r)})):a.a.createElement(X,null)),!c&&(0===r.length?a.a.createElement(Y,null):r.map((function(t,r){return e.renderRow(t,r)})))))}}]),t}(a.a.Component),z.defaultProps={recommendList:[]},q=F))||q),$=(r(222),Object(l.b)((function(e){return e.appList}),{getAppList:function(e){var t=localStorage.topfreeapplications;return function(){var e=Object(S.a)(N.a.mark((function e(r){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=6;break}return e.next=3,R.a.get("https://itunes.apple.com/hk/rss/topfreeapplications/limit=100/json");case 3:n=e.sent,localStorage.setItem("topfreeapplications",JSON.stringify(n.data.feed.entry)),t=JSON.stringify(n.data.feed.entry);case 6:r({type:"APP_LIST",payload:JSON.parse(t)});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(W=function(e){function t(e){var r;return Object(m.a)(this,t),(r=Object(f.a)(this,Object(h.a)(t).call(this,e))).renderRow=function(e,t,r){return a.a.createElement("div",{className:"media-list"},a.a.createElement("div",{className:"serial-number"},"".concat(1*r+1," ")),a.a.createElement("div",{className:"media-list-body media-list-column"},a.a.createElement("div",{className:"media-list-body-hd media-list-column-hd"},a.a.createElement("img",{src:e["im:image"][0].label,alt:""})),a.a.createElement("div",{className:"media-list-body-bd media-list-column-bd"},a.a.createElement("div",{className:"media-list-body-title"},e["im:name"].label),a.a.createElement("div",{className:"media-list-column-subtitle"},e.category.attributes.label," "),a.a.createElement("div",null,e.category.attributes.term,a.a.createElement("span",{className:"media-list-column-stars"},e.category.attributes["im:id"]," ")))))},r.pageNo=0,r.state={refreshing:!0,isLoading:!0,height:document.documentElement.clientHeight,hasMore:!0},r}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(S.a)(N.a.mark((function e(){var t,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.getAppList,r=this.state.height-i.a.findDOMNode(this.lv).offsetTop,e.next=4,t();case 4:this.setState({height:r,refreshing:!1,isLoading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=new O.a.DataSource({rowHasChanged:function(e,t){return e!==t}}),r=this.props.appList,n=this.state,c=n.refreshing,i=n.isLoading;return a.a.createElement(O.a,{key:"scrollView",ref:function(t){return e.lv=t},dataSource:t.cloneWithRows(r),renderFooter:function(){return a.a.createElement("div",{style:{padding:30,textAlign:"center"}},i?"Loading...":a.a.createElement(X,{data:"\u52a0\u8f7d\u5b8c\u6bd5..."}))},renderRow:this.renderRow,useBodyScroll:!0,className:"scroll-view",pullToRefresh:a.a.createElement(O.b,{refreshing:c}),pageSize:10})}}]),t}(n.Component))||W),ee=(r(223),Object(l.b)((function(e){return e}))(K=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.search.searchValue;return a.a.createElement("div",{className:"list"},a.a.createElement(Q,null),a.a.createElement(Z,{searchValue:e}),a.a.createElement($,null))}}]),t}(n.Component))||K),te=Object(o.c)({search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return g({},e,{searchValue:t.payload});case j:return g({},e,{searchList:t.payload});case w:return g({},e,{searchAppList:t.payload});default:return e}},appList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return H({},e,{appList:t.payload});case U:return H({},e,{searchList:t.payload});default:return e}},recommendList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return T({},e,{recommendList:t.payload});case I:return T({},e,{searchRecommendList:t.payload});default:return e}}});R.a.interceptors.request.use((function(e){return O.d.loading("\u52a0\u8f7d\u4e2d",0),e})),R.a.interceptors.response.use((function(e){return O.d.hide(),e}));r(224),r(225);var re=Object(o.e)(te,Object(o.d)(Object(o.a)(s.a),window.devToolsExtension?window.devToolsExtension():function(e){return e}));i.a.render(a.a.createElement(l.a,{store:re},a.a.createElement(u.a,null,a.a.createElement("div",null,a.a.createElement(p.c,null,a.a.createElement(p.a,{path:"/",component:ee}))))),document.getElementById("root"))}},[[119,1,2]]]);
//# sourceMappingURL=main.e34a3823.chunk.js.map